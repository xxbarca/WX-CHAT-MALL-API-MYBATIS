<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ly.imallbatis.dao.OrderMapper">


    <insert id="save" parameterType="com.ly.imallbatis.model.Order" useGeneratedKeys="true" keyProperty="id">
        insert into `order` (order_no, total_price, final_total_price, user_id, total_count, snap_img, snap_title, status, snap_address, snap_items, placed_time, expired_time)
        values (#{orderNo}, #{totalPrice}, #{finalTotalPrice}, #{userId}, #{totalCount}, #{snapImg}, #{snapTitle}, #{status}, #{snapAddress}, #{snapItems}, #{placedTime}, #{expiredTime})
    </insert>

    <select id="getUnPaid" resultType="com.ly.imallbatis.model.Order">
        select * from `order`
        where status = #{unpaid}
        and user_id = #{uid}
        and expired_time &gt; NOW()
    </select>
    <select id="getOrderByStatus" resultType="com.ly.imallbatis.model.Order">
        select * from `order`
        where status = #{status}
        and user_id = #{uid}
    </select>
    <select id="getOrderByUserId" resultType="com.ly.imallbatis.model.Order">
        select * from `order`
        where user_id = #{uid}
    </select>
</mapper>